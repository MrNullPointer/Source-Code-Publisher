<!Document html>
<html><head></head><body>/////////////////////////////////////////////////////////////////////<br />// DirExplorerI.cpp - Template directory explorer                  //<br />// ver 1.2                                                         //<br />// Jim Fawcett, CSE687 - Object Oriented Design, Fall 2018         //<br />/////////////////////////////////////////////////////////////////////<br /><br />#ifdef TEST_DIREXPLORERI  // only compile the following when defined<br /><br />#include "DirExplorerI.h"<br />#include "../Utilities/StringUtilities/StringUtilities.h"<br />#include "../Utilities/CodeUtilities/CodeUtilities.h"<br />#include &lt;<br /><br />using namespace Utilities;<br />using namespace FileSystem;<br /><br />class DerivedDirExplorerI : public DirExplorerI<br />{<br />public:<br />  DerivedDirExplorerI(const std::string& path) : DirExplorerI(path) <br />  {<br />    std::cout &lt;<br />  }<br />  //----&lt;<br /><br />  virtual void doFile(const std::string& filename)<br />  {<br />    if (!done() || showAllInCurrDir())<br />    {<br />      std::cout &lt;<br />      ++fileCount_;<br />    }<br />  }<br />  //----&lt;<br /><br />  virtual void doDir(const std::string& dirname)<br />  {<br />    std::cout &lt;<br />    ++dirCount_;<br />  }<br />};<br /><br />ProcessCmdLine::Usage customUsage()<br />{<br />  std::string usage;<br />  usage += "\n  Command Line: path [/option]* [/pattern]*";<br />  usage += "\n    path is relative or absolute path where processing begins";<br />  usage += "\n    [/option]* are one or more options of the form:";<br />  usage += "\n      /s - walk directory recursively";<br />  usage += "\n      /h - hide empty directories";<br />  usage += "\n      /a - on stopping, show all files in current directory";<br />  usage += "\n    [pattern]* are one or more pattern strings of the form:";<br />  usage += "\n      *.h *.cpp *.cs *.txt or *.*";<br />  usage += "\n";<br />  return usage;<br />}<br /><br />int main(int argc, char *argv[])<br />{<br />  Title("Demonstrate DirExplorer-Inheritance, " + DirExplorerI::version());<br /><br />  ProcessCmdLine pcl(argc, argv);<br />  pcl.usage(customUsage());<br /><br />  preface("Command Line: ");<br />  pcl.showCmdLine();<br />  putline();<br /><br />  if (pcl.parseError())<br />  {<br />    pcl.usage();<br />    std::cout &lt;<br />    return 1;<br />  }<br /><br />  DerivedDirExplorerI de(pcl.path());<br />  putline();<br /><br />  for (auto patt : pcl.patterns())<br />  {<br />    de.addPattern(patt);<br />  }<br /><br />  if (pcl.hasOption('s'))<br />  {<br />    de.recurse();<br />  }<br /><br />  if (pcl.hasOption('h'))<br />  {<br />    de.hideEmptyDirectories(true);<br />  }<br /><br />  if (pcl.hasOption('a'))<br />  {<br />    de.showAllInCurrDir(true);<br />  }<br /><br />  if (pcl.maxItems() &gt;<br />  {<br />    de.maxItems(pcl.maxItems());<br />  }<br /><br />  de.search();<br />  de.showStats();<br /><br />  std::cout &lt;<br />  return 0;<br />}<br /><br />#endif<br /></body>/html